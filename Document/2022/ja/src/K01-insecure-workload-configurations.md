## 概要

Kubernetes におけるワークロードのセキュリティコンテキストは高度に設定できてしまうため、深刻なセキュリティの設定ミスが組織のワークロードやクラスタ全体に広がる可能性があります。Redhat が実施した 2021 Kubernetes Security Survey によると、回答者の 60% 近くが過去 12 か月間に Kubernetes 環境での設定ミスのインシデントを経験しています。

## 説明

Kubernetes マニフェストには特定のワークロードの信頼性、セキュリティ、スケーラビリティに影響を与える可能性のあるさまざまな設定が多く含まれています。これらの設定は継続的に監査し修正する必要があります。影響の大きいマニフェスト設定の例をいくつか以下に示します。

**アプリケーションプロセスは root として実行すべきではない:** 

**読み取り専用ファイルシステムを使用すべきである:**

**特権コンテナを禁止すべきである**: Kubernetes 内でコンテナを `privileged` に設定すると、コンテナ自体がホスト自体の他のリソースやカーネル機能にアクセスできます。特権コンテナはビルトインのコンテナ分離メカニズムの多くを完全に取り除いてしまうため危険です。

**ホストネットワークとプロセス空間を使用すべきではない:**

## 防止方法

大規模で分散した Kubernetes 環境全体でセキュアな設定を維持することは、困難な作業となる可能性があります。セキュリティ設定は一般的にマニフェスト自体のセキュリティコンテキストで設定されます。例として以下をご覧ください。

## 攻撃シナリオの例

Example #1: コンテナブレイクアウト 1 ライナー

Example #2: Docker ソケットマウント

## 参考資料

https://www.cisecurity.org/benchmark/kubernetes
